openapi: 3.0.0
info:
  description: API CebuloBoya
  version: 0.0.1
  title: CebulaPi
  contact:
    email: mlegiecki@gmail.com
    name: Mateusz Legięcki
servers:
  - url: 'https://cebul.ga'
paths:
  /last_promotions:
    get:
      summary: A list of most recent promotions in all shops
      operationId: getLastPromotions
      parameters:
      - $ref: '#/components/parameters/limit'
      responses:
        '200':
          description: Shop entry with most recent promotions.
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/Shop'
  /rss:
    get:
      summary: RSS feed
      operationId: getRssFeed
      parameters:
      - $ref: '#/components/parameters/limit'
      responses:
        200:
          description: Generated feed
  /saved_money:
    get:
      summary: Saved money info
      operationId: getSavedMoney
      responses:
        '200':
          description: Saved money report
          content:
            application/json:
              schema:
                type: object
                properties:
                  total:
                    type: number
                    format: foat
                  shops:
                    type: array
                    items:
                      type: object
                      properties:
                        id:
                          type: number
                          format: integer
                        name:
                          type: string
                        saved_money:
                          type: number
                          format: float

components:
  parameters:
    limit:
      in: query
      name: limit
      schema:
        type: integer
        maximum: 20
        minimum: 0
  schemas:
    Shop:
      type: object
      properties:
        id:
          type: number
          format: integer
          example: 2
        name:
          type: string
          example: 'morele.net'
        last_promotions:
          type: array
          items:
            $ref: '#/components/schemas/Promotion'
    Promotion:
      type: object
      properties:
        product_name:
          type: string
          example: 'Podkładka Natec PODKŁADKA POD MYSZ BIUROWA NATEC TIME ZONE MAP MAXI (NPO-1119)'
        old_price:
          type: number
          format: float
          minimum: 0
          example: 40.99
        new_price:
          type: number
          format: float
          minimum: 0
          example: 29.90
        url:
          type: string
          format: url
          example: 'https://www.morele.net/podkladka-natec-podkladka-pod-mysz-biurowa-natec-time-zone-map-maxi-npo-1119-1700046/'
        code:
          type: string
          nullable: true
          example: 'NATEC2000'
        timestamp:
          type: number
          format: long
          example: 1534349725
        quantity:
          type: object
          properties:
            total:
              type: number
              format: integer
              example: 20
              minimum: 0
            left:
              type: number
              format: integer
              example: 12
              minimum: 0
